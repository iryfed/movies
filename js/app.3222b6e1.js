(function(e){function t(t){for(var a,s,r=t[0],l=t[1],c=t[2],d=0,v=[];d<r.length;d++)s=r[d],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&v.push(n[s][0]),n[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);m&&m(t);while(v.length)v.shift()();return o.push.apply(o,c||[]),i()}function i(){for(var e,t=0;t<o.length;t++){for(var i=o[t],a=!0,r=1;r<i.length;r++){var l=i[r];0!==n[l]&&(a=!1)}a&&(o.splice(t--,1),e=s(s.s=i[0]))}return e}var a={},n={app:0},o=[];function s(t){if(a[t])return a[t].exports;var i=a[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=e,s.c=a,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(i,a,function(t){return e[t]}.bind(null,a));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/movies/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var m=l;o.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var a=i("2b0e"),n=i("3c91"),o=i.n(n),s=i("1881"),r=i.n(s),l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("router-view"),e._m(0),i("back-to-top",[i("div",{staticClass:"toTop"})])],1)},c=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("footer",[i("div",{staticClass:"container"},[i("div",{staticClass:"footer"},[e._v(" © 2020 ")])])])}],m=i("6afc"),d={components:{BackToTop:m["a"]}},v=d,u=i("2877"),p=Object(u["a"])(v,l,c,!1,null,null,null),f=p.exports,g=i("8c4f"),h=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("header",[i("div",{staticClass:"container"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-xs-12 col-sm-12 col-md-6 col-lg-5 flex-container"},[i("BaseLogo")],1),i("div",{staticClass:"col-xs-12 col-sm-12 col-md-3 col-lg-5 find"},[i("FindMoviesItem",{attrs:{title:e.title},on:{"update:title":function(t){e.title=t}}})],1),i("div",{staticClass:"col-xs-12 col-sm-12 col-md-3 col-lg-2 create"},[i("MovieActionCreate",[e._v(" добавить фильм ")])],1)])])]),i("main",[i("div",{staticClass:"container"},[i("h1",{staticClass:"page-title"},[e._v("Найдено фильмов: "+e._s(e.moviesCount))]),e.moviesListLoading?i("div",{staticClass:"lds-roller-container"},[e._m(0)]):e._e(),e.moviesListLoadingFailed?i("div",[e._v(" Ошибка загрузки =( ")]):e._e(),i("MoviesList",{attrs:{movies:e.movies}})],1),i("BasePagination",{attrs:{count:e.moviesCount,"size-page":e.sizePage},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)])},_=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"lds-roller"},[i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div")])}],b=(i("99af"),i("ac1f"),i("841c"),function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)}),C=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"flex-container"},[i("div",{staticClass:"header__logo"}),i("div",{staticClass:"header__title"},[e._v("Каталог фильмов")])])}],L={},x=L,y=Object(u["a"])(x,b,C,!1,null,null,null),I=y.exports,$=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row movies"},e._l(e.movies,(function(e){return i("MoviesItem",{key:e.id,attrs:{movie:e}})})),1)},D=[],M=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-xs-12 col-sm-6 col-md-4 col-lg-3"},[i("div",{staticClass:"movies__item movie"},[i("router-link",{attrs:{to:{name:"movie",params:{id:e.movie.id}}}},[i("img",{staticClass:"movie__img hvr-grow-shadow",attrs:{src:e.movie.poster,alt:e.movie.title}})]),i("div",{staticClass:"movie__action action flex-container"},[i("MovieActionUpdate",{attrs:{movieId:e.movie.id}}),i("MovieActionDelete",{attrs:{movie:e.movie}})],1),i("router-link",{attrs:{to:{name:"movie",params:{id:e.movie.id}}}},[i("div",{staticClass:"movie__title"},[e._v(" "+e._s(e.movie.title)+" ")])]),i("div",{staticClass:"movie__props"},[e._v(" "+e._s(e.movie.country)+", "+e._s(e.movie.year)+", "),i("span",{staticClass:"movie__type"},[e._v(e._s(e.movie.type))])]),i("div",{staticClass:"movie__genres"},e._l(e.movie.genres,(function(t){return i("span",{key:t.name},[e._v(" "+e._s(t.name)+" ")])})),0),i("MoviesRating",{attrs:{imdbID:e.movie.imdbID}})],1)])},w=[],k=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.imdbID?i("div",{staticClass:"movie__rating"},[i("a",{attrs:{href:e.link,target:"_blank"}},[i("span",{staticClass:"imdb"})]),i("span",{staticClass:"imdb-star"},[e._v(e._s(e.rating.imdbRating))]),e.imdbDataLoading?i("div",{staticClass:"lds-mini"},[i("div",{staticClass:"line"}),i("div",{staticClass:"line"}),i("div",{staticClass:"line"})]):e._e(),e.imdbDataLoadingFailed||e.rating.Error?i("span",{staticClass:"error"},[e._v("ошибка загрузки")]):e._e()]):e._e()},E=[],P=i("bc3a"),O=i.n(P),j="https://film-api-backend.herokuapp.com",T="https://www.omdbapi.com",F={props:["imdbID"],data:function(){return{imdbData:null,imdbDataLoading:!1,imdbDataLoadingFailed:!1}},computed:{rating:function(){return this.imdbData?this.imdbData:[]},link:function(){return"https://www.imdb.com/title/".concat(this.imdbID)}},methods:{loadRating:function(){var e=this;this.imdbDataLoading=!0,this.imdbDataLoadingFailed=!1,clearTimeout(this.loadRatingTimer),this.loadRatingTimer=setTimeout((function(){O.a.get("".concat(T),{params:{i:e.imdbID,apikey:"f2297fd4"}}).then((function(t){e.imdbData=t.data})).catch((function(){e.imdbDataLoadingFailed=!0})).then((function(){e.imdbDataLoading=!1}))}),1e3)}},created:function(){this.loadRating()}},B=F,A=Object(u["a"])(B,k,E,!1,null,null,null),U=A.exports,R=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("router-link",{staticClass:"action__update",attrs:{to:{name:"update",params:{id:e.movieId}},type:"button"}},[e._t("default")],2)},S=[],N={props:["movieId"]},z=N,G=Object(u["a"])(z,R,S,!1,null,null,null),q=G.exports,J=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{"margin-top":"4px"}},[i("button",{staticClass:"action__delete",attrs:{type:"button"},on:{click:e.showDialog}}),i("v-dialog",{attrs:{name:"dialog",width:400,height:120,clickToClose:!0}}),i("modal",{attrs:{name:"modal",width:400,height:120,clickToClose:!1}},[i("div",{staticClass:"vue-dialog-content"},[e.deleteLoading?i("div",{staticClass:"lds-mini"},[i("div",{staticClass:"line"}),i("div",{staticClass:"line"}),i("div",{staticClass:"line"})]):e.deleteSuccess?i("div",[i("button",{staticClass:"btn btn-close-modal",on:{click:e.hideModalRedirect}},[e._v("❌")]),e._v(" Фильм удален! ")]):i("div",[i("button",{staticClass:"btn btn-close-modal",on:{click:e.hideModalError}},[e._v("❌")]),i("p",{staticClass:"error"},[i("strong",{staticClass:"error"},[e._v("Ошибка:")]),e._v(" не удалось удалить фильм. ")])])])])],1)},V=[],Z=(i("b0c0"),{data:function(){return{deleteSuccess:!1,deleteError:!1,deleteLoading:!1}},methods:{deleteMovie:function(){var e=this;this.deleteSuccess=!1,this.deleteError=!1,this.deleteLoading=!0,O.a.delete("".concat(j,"/movies/delete/").concat(this.movie.id)).then((function(){e.deleteSuccess=!0})).catch((function(t){console.log("error: ",t),e.deleteError=!0})).then((function(){e.deleteLoading=!1}))}}}),H={mixins:[Z],props:["movie"],methods:{showDialog:function(){var e=this;this.$modal.show("dialog",{title:"",text:"Хотите удалить фильм <strong>".concat(this.movie.title,"</strong> из каталога?"),buttons:[{title:'<div class="cancel">Отменить</div>',handler:function(){e.$modal.hide("dialog")}},{title:'<div class="delete">Удалить</div>',handler:function(){e.$modal.hide("dialog"),e.$modal.show("modal"),e.deleteMovie()}}]})},hideModalError:function(){this.$modal.hide("modal")},hideModalRedirect:function(){this.$modal.hide("modal"),"main"!==this.$rout.name&&this.$router.push({name:"main"})}},mount:function(){this.show()}},K=H,Q=Object(u["a"])(K,J,V,!1,null,null,null),W=Q.exports,X={props:["movie"],components:{MoviesRating:U,MovieActionUpdate:q,MovieActionDelete:W}},Y=X,ee=Object(u["a"])(Y,M,w,!1,null,null,null),te=ee.exports,ie={props:["movies"],components:{MoviesItem:te}},ae=ie,ne=Object(u["a"])(ae,$,D,!1,null,null,null),oe=ne.exports,se=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"find-icon"}),i("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.currentTitle,expression:"currentTitle",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"название фильма"},domProps:{value:e.currentTitle},on:{input:[function(t){t.target.composing||(e.currentTitle=t.target.value.trim())},function(t){return t.preventDefault(),e.input(t)}],blur:function(t){return e.$forceUpdate()}}})])},re=[],le={data:function(){return{currentTitle:""}},props:["title"],watch:{title:function(e){this.currentTitle=e}},methods:{input:function(){var e=this;setTimeout((function(){e.$emit("update:title",e.currentTitle)}),1500)}}},ce=le,me=Object(u["a"])(ce,se,re,!1,null,null,null),de=me.exports,ve=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.count>e.sizePage?i("div",{staticClass:"pagination"},[i("div",{staticClass:"pagination__prev",class:{disabled:e.currentPage<=1},on:{click:function(t){return t.preventDefault(),e.paginate(e.currentPage-1,e.pages)}}}),e._l(e.pages,(function(t){return i("div",{key:t,staticClass:"pagination__item",class:{active:t===e.currentPage},on:{click:function(i){return i.preventDefault(),e.paginate(t,e.pages)}}},[e._v(" "+e._s(t)+" ")])})),i("div",{staticClass:"pagination__next",class:{disabled:e.currentPage>=e.pages},on:{click:function(t){return t.preventDefault(),e.paginate(e.currentPage+1,e.pages)}}})],2):e._e()},ue=[],pe={model:{prop:"currentPage",event:"paginate"},props:["currentPage","sizePage","count"],computed:{pages:function(){return Math.ceil(this.count/this.sizePage)}},methods:{paginate:function(e,t){e>=1&&e<=t&&this.$emit("paginate",e)}}},fe=pe,ge=Object(u["a"])(fe,ve,ue,!1,null,null,null),he=ge.exports,_e=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("router-link",{staticClass:"action__create",attrs:{to:{name:"create"},type:"button"}},[e._t("default")],2)},be=[],Ce={},Le=Ce,xe=Object(u["a"])(Le,_e,be,!1,null,null,null),ye=xe.exports,Ie={components:{BaseLogo:I,MoviesList:oe,FindMoviesItem:de,BasePagination:he,MovieActionCreate:ye},data:function(){return{moviesData:null,moviesListLoading:!0,moviesListLoadingFailed:!1,currentPage:1,sizePage:8,title:""}},computed:{movies:function(){return this.moviesData?this.moviesData.search:[]},moviesCount:function(){return this.moviesData?this.moviesData.totalResults:0}},methods:{loadMovies:function(){var e=this;this.moviesListLoading=!0,this.moviesListLoadingFailed=!1,clearTimeout(this.loadMoviesTimer),this.loadMoviesTimer=setTimeout((function(){O.a.get("".concat(j,"/movies/page=").concat(e.currentPage,"/size=").concat(e.sizePage,"/find"),{params:{title:e.title}}).then((function(t){e.moviesData=t.data})).catch((function(){e.moviesListLoadingFailed=!0})).then((function(){e.moviesListLoading=!1}))}),0)}},watch:{title:function(){this.currentPage=1,this.loadMovies()},currentPage:function(){this.loadMovies()}},created:function(){this.loadMovies()}},$e=Ie,De=Object(u["a"])($e,h,_,!1,null,null,null),Me=De.exports,we=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("header",[i("div",{staticClass:"container"},[i("router-link",{staticClass:"flex-container",attrs:{to:{name:"main"}}},[i("BaseLogo")],1)],1)]),i("main",[i("div",{staticClass:"container"},[e.movieLoading?i("div",{staticClass:"lds-roller-container"},[e._m(0)]):e._e(),e.movieLoadingFailed?i("div",[e._v(" Ошибка загрузки =( ")]):e._e(),i("MovieView",{attrs:{movie:e.movie}})],1)])])},ke=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"lds-roller"},[i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div")])}],Ee=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"breadcrumbs"},[i("router-link",{attrs:{to:{name:"main"}}},[i("span",{staticClass:"breadcrumbs__link"},[e._v("главная")])]),i("span",[e._v(e._s(e.movie.title))])],1),0!==Object.keys(e.movie).length?i("div",[i("div",{staticClass:"movie__action action flex-container"},[i("MovieActionUpdate",{attrs:{movieId:e.movie.id}}),i("MovieActionDelete",{attrs:{movie:e.movie}}),i("MovieActionCreate")],1),i("h1",{staticClass:"movie__title"},[e._v(e._s(e.movie.title))]),i("div",{staticClass:"movie__props"},[e._v(" "+e._s(e.movie.country)+", "+e._s(e.movie.year)+", "),i("span",{staticClass:"movie__type"},[e._v(e._s(e.movie.type))])]),i("hr"),i("div",{staticClass:"row"},[i("div",{staticClass:"col-xs-12 col-sm-4 col-md-3 col-lg-3"},[i("img",{staticClass:"movie__img",attrs:{src:e.movie.poster,alt:e.movie.title}})]),i("div",{staticClass:"col-xs-12 col-sm-8 col-md-9 col-lg-9"},[i("div",{staticClass:"movie__genres"},e._l(e.movie.genres,(function(t){return i("span",{key:t.name},[e._v(" "+e._s(t.name)+" ")])})),0),i("MoviesRating",{attrs:{imdbID:e.movie.imdbID}}),i("div",{staticClass:"movie__descr"},[e._v(" "+e._s(e.movie.description)+" ")])],1)]),i("div",{staticClass:"movie__trailer"},[i("video-embed",{attrs:{src:"https://www.youtube.com/watch?v=-_DJEzZk2pc"}})],1)]):e._e()])},Pe=[],Oe={props:["movie"],components:{MoviesRating:U,MovieActionUpdate:q,MovieActionCreate:ye,MovieActionDelete:W}},je=Oe,Te=Object(u["a"])(je,Ee,Pe,!1,null,null,null),Fe=Te.exports,Be=(i("4de4"),{data:function(){return{movieData:null,movieLoading:!1,movieLoadingFailed:!1}},computed:{movie:function(){var e=this;return this.movieData?this.movieData.search.filter((function(t){return t.id===e.$route.params.id}))[0]:{}}},methods:{loadMovie:function(){var e=this;this.movieLoading=!0,this.movieLoadingFailed=!1,O.a.get("".concat(j,"/movies")).then((function(t){e.movieData=t.data})).catch((function(){e.movieLoadingFailed=!0})).then((function(){e.movieLoading=!1}))}},watch:{"$route.params.id":{handler:function(){this.loadMovie()},immediate:!0}}}),Ae={components:{BaseLogo:I,MovieView:Fe},mixins:[Be]},Ue=Ae,Re=Object(u["a"])(Ue,we,ke,!1,null,null,null),Se=Re.exports,Ne=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("header",[i("div",{staticClass:"container"},[i("router-link",{staticClass:"flex-container",attrs:{to:{name:"main"}}},[i("BaseLogo")],1)],1)]),i("main",[i("div",{staticClass:"container"},[e.createLoading?i("div",{staticClass:"lds-roller-container"},[e._m(0)]):e._e(),i("div",{staticClass:"breadcrumbs"},[i("router-link",{attrs:{to:{name:"main"}}},[i("span",{staticClass:"breadcrumbs__link"},[e._v("главная")])]),i("span",[e._v("добавить фильм")])],1),e.createError?i("p",{staticClass:"error"},[i("strong",{staticClass:"error"},[e._v("Ошибка:")]),e._v(" Не удалось добавить новый фильм. ")]):e._e(),i("h1",[e._v("Добавить новый фильм в каталог")]),i("form",{staticClass:"movie-form",attrs:{action:"#",method:"POST"},on:{submit:function(t){return t.preventDefault(),e.createMovie(t)}}},[i("BaseMovieForm",{attrs:{movie:{}}})],1)])])])},ze=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"lds-roller"},[i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div")])}],Ge=i("5530"),qe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("fieldset",[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.movieItem.id,expression:"movieItem.id",modifiers:{trim:!0}}],attrs:{type:"hidden",name:"id",placeholder:"id"},domProps:{value:e.movieItem.id},on:{input:function(t){t.target.composing||e.$set(e.movieItem,"id",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),i("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.movieItem.title,expression:"movieItem.title",modifiers:{trim:!0}}],attrs:{type:"text",name:"title",placeholder:"Название фильма",required:""},domProps:{value:e.movieItem.title},on:{input:function(t){t.target.composing||e.$set(e.movieItem,"title",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),i("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.movieItem.titleEn,expression:"movieItem.titleEn",modifiers:{trim:!0}}],attrs:{type:"text",name:"titleEn",placeholder:"Movie title",required:""},domProps:{value:e.movieItem.titleEn},on:{input:function(t){t.target.composing||e.$set(e.movieItem,"titleEn",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),i("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.movieItem.country,expression:"movieItem.country",modifiers:{trim:!0}}],attrs:{type:"text",name:"country",placeholder:"Страна"},domProps:{value:e.movieItem.country},on:{input:function(t){t.target.composing||e.$set(e.movieItem,"country",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),i("input",{directives:[{name:"model",rawName:"v-model.trim.number",value:e.movieItem.year,expression:"movieItem.year",modifiers:{trim:!0,number:!0}}],attrs:{type:"number",name:"year",placeholder:"Год выпуска"},domProps:{value:e.movieItem.year},on:{input:function(t){t.target.composing||e.$set(e.movieItem,"year",e._n(t.target.value.trim()))},blur:function(t){return e.$forceUpdate()}}}),i("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.movieItem.type,expression:"movieItem.type",modifiers:{trim:!0}}],attrs:{type:"text",name:"type",placeholder:"Тип"},domProps:{value:e.movieItem.type},on:{input:function(t){t.target.composing||e.$set(e.movieItem,"type",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.movieItem.description,expression:"movieItem.description"}],attrs:{name:"description",placeholder:"описание"},domProps:{value:e.movieItem.description},on:{input:function(t){t.target.composing||e.$set(e.movieItem,"description",t.target.value)}}})]),i("fieldset",[i("legend",[e._v("жанры")]),e.genresListLoading?i("div",{staticClass:"lds-mini"},[i("div",{staticClass:"line"}),i("div",{staticClass:"line"}),i("div",{staticClass:"line"})]):e._e(),e.genresListLoadingFailed?i("span",{staticClass:"error"},[e._v("ошибка загрузки")]):e._e(),0!==e.genresList.length?i("div",e._l(e.genresList,(function(t){return i("div",{key:t.name,staticClass:"field__genre"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.genres,expression:"genres"}],attrs:{type:"checkbox",id:t.name},domProps:{value:t,checked:Array.isArray(e.genres)?e._i(e.genres,t)>-1:e.genres},on:{change:function(i){var a=e.genres,n=i.target,o=!!n.checked;if(Array.isArray(a)){var s=t,r=e._i(a,s);n.checked?r<0&&(e.genres=a.concat([s])):r>-1&&(e.genres=a.slice(0,r).concat(a.slice(r+1)))}else e.genres=o}}}),i("span",{attrs:{for:t.name}},[e._v(e._s(t.name))])])})),0):e._e()]),i("fieldset",[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.movieItem.imdbID,expression:"movieItem.imdbID",modifiers:{trim:!0}}],attrs:{type:"text",name:"imdbID",placeholder:"imdbID"},domProps:{value:e.movieItem.imdbID},on:{input:function(t){t.target.composing||e.$set(e.movieItem,"imdbID",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),i("fieldset",[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.movieItem.poster,expression:"movieItem.poster",modifiers:{trim:!0}}],attrs:{type:"url",name:"poster",placeholder:"ссылка на постер к фильму",required:""},domProps:{value:e.movieItem.poster},on:{input:function(t){t.target.composing||e.$set(e.movieItem,"poster",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),i("fieldset",[i("div",{staticClass:"row"},[i("div",{staticClass:"col-xs-12 col-sm-12 col-md-12 col-lg-3"}),i("div",{staticClass:"col-xs-12 col-sm12 col-md-4 col-lg-3"},[i("button",{staticClass:"btn btn-reset btn-extend",attrs:{type:"button"},on:{click:e.backPrevPage}},[e._v(" отменить ")])]),e._m(0),e._m(1)])])])},Je=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-xs-12 col-sm12 col-md-4 col-lg-3"},[i("input",{staticClass:"btn btn-reset btn-extend",attrs:{type:"reset",value:"сбросить"}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-xs-12 col-sm12 col-md-4 col-lg-3"},[i("input",{staticClass:"btn btn-submit btn-extend",attrs:{type:"submit",value:"cохранить"}})])}],Ve={props:["movie"],data:function(){return{genresListData:null,genresListLoading:!1,genresListLoadingFailed:!1,movieItem:this.movie||{},genres:this.movie.genres||[]}},computed:{genresList:function(){return this.genresListData?this.genresListData:[]}},methods:{loadGenresList:function(){var e=this;this.genresListLoading=!0,this.genresListLoadingFailed=!1,clearTimeout(this.loadGenresTimer),this.loadGenresTimer=setTimeout((function(){O.a.get("".concat(j,"/genre")).then((function(t){e.genresListData=t.data})).catch((function(){e.genresListLoadingFailed=!0})).then((function(){e.genresListLoading=!1}))}),0)},backPrevPage:function(){this.$router.go(-1)}},created:function(){this.loadGenresList()}},Ze=Ve,He=Object(u["a"])(Ze,qe,Je,!1,null,null,null),Ke=He.exports,Qe={components:{BaseLogo:I,BaseMovieForm:Ke},data:function(){return{createLoading:!1,createError:!1,createErrorMessage:""}},methods:{createMovie:function(){var e=this;this.createError=!1,this.createLoading=!0,O.a.post("".concat(j,"/movies/create"),Object(Ge["a"])(Object(Ge["a"])({},this.movieItem),{},{genres:this.genres})).then((function(t){e.movieData=t.data,e.$router.push({name:"movie",params:{id:t.data.search.id}})})).catch((function(t){e.createLoading=!1,e.createError=!0,e.createErrorMessage=t.response.data.message})).then((function(){e.createLoading=!1}))}}},We=Qe,Xe=Object(u["a"])(We,Ne,ze,!1,null,null,null),Ye=Xe.exports,et=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("header",[i("div",{staticClass:"container"},[i("router-link",{staticClass:"flex-container",attrs:{to:{name:"main"}}},[i("BaseLogo")],1)],1)]),i("main",[i("div",{staticClass:"container"},[e.movieLoading||e.updateLoading?i("div",{staticClass:"lds-roller-container"},[e._m(0)]):e._e(),e.movieLoadingFailed?i("div",[e._v(" Ошибка загрузки =( ")]):e._e(),e.movieData?i("div",[i("div",{staticClass:"breadcrumbs"},[i("router-link",{attrs:{to:{name:"main"}}},[i("span",{staticClass:"breadcrumbs__link"},[e._v("главная")])]),i("router-link",{attrs:{to:{name:"movie",params:{id:e.movie.id}}}},[i("span",{staticClass:"breadcrumbs__link"},[e._v(e._s(e.movie.title))])]),i("span",[e._v("изменить фильм "+e._s(e.movie.title))])],1),e.updateError?i("p",{staticClass:"error"},[i("strong",{staticClass:"error"},[e._v("Ошибка:")]),e._v(" не удалось изменить фильм. ")]):e._e(),i("h1",[e._v("Изменить фильм "+e._s(e.movie.title))]),i("form",{staticClass:"movie-form",attrs:{action:"#"},on:{submit:function(t){return t.preventDefault(),e.updateMovie(t)}}},[i("BaseMovieForm",{attrs:{movie:e.movie}})],1)]):e._e()])])])},tt=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"lds-roller"},[i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div"),i("div")])}],it={data:function(){return{updateLoading:!1,updateError:!1}},components:{BaseLogo:I,BaseMovieForm:Ke},mixins:[Be],methods:{updateMovie:function(){var e=this;this.updateLoading=!0,this.updateError=!1,O.a.put("".concat(j,"/movies/update/").concat(this.movie.id),Object(Ge["a"])({},this.movieItem)).then((function(t){e.movieData=t.data,e.$router.push({name:"movie",params:{id:t.data.search.id}})})).catch((function(t){e.updateError=!0,e.updateLoading=!1,console.log("error: ",t)})).then((function(){e.updateLoading=!1}))}}},at=it,nt=Object(u["a"])(at,et,tt,!1,null,null,null),ot=nt.exports,st=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("header",[i("div",{staticClass:"container"},[i("router-link",{staticClass:"flex-container",attrs:{to:{name:"main"}}},[i("BaseLogo")],1)],1)]),i("main",[i("div",{staticClass:"container"},[i("h1",{staticClass:"page-title"},[e._v("404 Error")]),e._v(" Страница не найдена =( "),i("br"),e._v(" Вернуться "),i("router-link",{attrs:{to:{name:"main"}}},[e._v(" на главную ")])],1)])])},rt=[],lt={components:{BaseLogo:I}},ct=lt,mt=Object(u["a"])(ct,st,rt,!1,null,null,null),dt=mt.exports;a["a"].use(g["a"]);var vt=[{name:"main",component:Me,path:"/"},{name:"movie",component:Se,path:"/movie/:id"},{name:"create",component:Ye,path:"/create"},{name:"update",component:ot,path:"/update/:id"},{name:"notFound",component:dt,path:"*"}],ut=new g["a"]({routes:vt}),pt=ut,ft=i("2f62");a["a"].use(ft["a"]);var gt=new ft["a"].Store({state:{},mutations:{},actions:{},modules:{}});a["a"].config.productionTip=!1,a["a"].use(o.a),a["a"].use(r.a,{dialog:!0}),new a["a"]({router:pt,store:gt,render:function(e){return e(f)}}).$mount("#app")}});
//# sourceMappingURL=app.3222b6e1.js.map